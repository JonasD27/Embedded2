\hypertarget{main_8c_source}{}\doxysection{main.\+c}
\label{main_8c_source}\index{main.c@{main.c}}
\mbox{\hyperlink{main_8c}{gehe zur Dokumentation dieser Datei}}
\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00001}00001 \textcolor{comment}{/*TODO}}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00002}00002 \textcolor{comment}{    Doku mit DoxyGen}}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00003}00003 \textcolor{comment}{ *  }}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00004}00004 \textcolor{comment}{ */}}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00005}00005 }
\DoxyCodeLine{\Hypertarget{main_8c_source_l00006}00006 }
\DoxyCodeLine{\Hypertarget{main_8c_source_l00007}00007 \textcolor{comment}{/* Files to Include                                                           */}}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00008}00008 }
\DoxyCodeLine{\Hypertarget{main_8c_source_l00010}\mbox{\hyperlink{main_8c_a34b04bd23b07b485921a728ad0805ac4}{00010}} \textcolor{preprocessor}{\#define MAIN}}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00011}00011 \textcolor{preprocessor}{\#include <xc.h>}}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00012}00012 }
\DoxyCodeLine{\Hypertarget{main_8c_source_l00013}00013 \textcolor{preprocessor}{\#include <stdint.h>}        \textcolor{comment}{/* Includes uint16\_t definition                    */}}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00014}00014 \textcolor{preprocessor}{\#include <stdbool.h>}       \textcolor{comment}{/* Includes true/false definition                  */}}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00015}00015 \textcolor{preprocessor}{\#include <string.h>}}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00016}00016 \textcolor{preprocessor}{\#include <stdio.h>}}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00017}00017 \textcolor{preprocessor}{\#include <stdlib.h>}}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00018}00018 }
\DoxyCodeLine{\Hypertarget{main_8c_source_l00019}00019 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{_u_a_r_t_8h}{UART.h}}"{}}}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00020}00020 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{_i2_c_8h}{I2C.h}}"{}}}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00021}00021 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{lcd__gpio_8h}{lcd\_gpio.h}}"{}}}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00022}00022 }
\DoxyCodeLine{\Hypertarget{main_8c_source_l00023}00023 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{system_8h}{system.h}}"{}}        \textcolor{comment}{/* System funct/params, like osc/peripheral config */}}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00024}00024 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{user_8h}{user.h}}"{}}          \textcolor{comment}{/* User funct/params, such as InitApp              */}}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00025}00025 }
\DoxyCodeLine{\Hypertarget{main_8c_source_l00026}00026 }
\DoxyCodeLine{\Hypertarget{main_8c_source_l00027}00027 }
\DoxyCodeLine{\Hypertarget{main_8c_source_l00028}00028 \textcolor{comment}{/* Global Variable Declaration                                                */}}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00029}00029 }
\DoxyCodeLine{\Hypertarget{main_8c_source_l00031}\mbox{\hyperlink{main_8c_a8095cd8bb3de52fffba928ed8ff15065}{00031}} \textcolor{preprocessor}{\#define HEARTBEAT\_MS 1}}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00032}00032 }
\DoxyCodeLine{\Hypertarget{main_8c_source_l00033}\mbox{\hyperlink{_i2_c_8h_a11becdc58f1b623b42ad75744dfa6461}{00033}} \mbox{\hyperlink{_i2_c_8h_ada1e8e589688e2d6626421d8d85d9c53}{i2c\_status\_t}} \mbox{\hyperlink{main_8c_a11becdc58f1b623b42ad75744dfa6461}{status\_temperatur}} = \mbox{\hyperlink{_i2_c_8h_ada1e8e589688e2d6626421d8d85d9c53a4dfd42ec49d09d8c6555c218301cc30f}{Error}};}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00034}\mbox{\hyperlink{_i2_c_8h_a9b4d29ba3bf357b320400e1f01a35610}{00034}} \mbox{\hyperlink{_i2_c_8h_ada1e8e589688e2d6626421d8d85d9c53}{i2c\_status\_t}} \mbox{\hyperlink{main_8c_a9b4d29ba3bf357b320400e1f01a35610}{status\_licht}} = \mbox{\hyperlink{_i2_c_8h_ada1e8e589688e2d6626421d8d85d9c53a4dfd42ec49d09d8c6555c218301cc30f}{Error}};}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00035}00035 }
\DoxyCodeLine{\Hypertarget{main_8c_source_l00036}\mbox{\hyperlink{_i2_c_8h_adff71d8937a9a0e682b3a195f98be0df}{00036}} uint8\_t \mbox{\hyperlink{main_8c_adff71d8937a9a0e682b3a195f98be0df}{write\_data\_buffer\_temp}}=0b00000000;}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00037}\mbox{\hyperlink{_i2_c_8h_a2d5347585325c234d8c68be50f2eb6a0}{00037}} uint8\_t \mbox{\hyperlink{main_8c_a2d5347585325c234d8c68be50f2eb6a0}{write\_data\_buffer\_light}}=0b00010000;}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00038}\mbox{\hyperlink{_i2_c_8h_aef8997c71403e269e83a8e8478ccf73c}{00038}} uint8\_t \mbox{\hyperlink{main_8c_aef8997c71403e269e83a8e8478ccf73c}{read\_data\_buffer\_temp}}[2];}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00039}\mbox{\hyperlink{_i2_c_8h_a812b49b4aafdf99e12c75ed8005948a1}{00039}} uint8\_t \mbox{\hyperlink{main_8c_a812b49b4aafdf99e12c75ed8005948a1}{read\_data\_buffer\_light}}[2];}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00040}00040 }
\DoxyCodeLine{\Hypertarget{main_8c_source_l00041}\mbox{\hyperlink{main_8c_adcd199297f9a8146dd65366775e2cf7d}{00041}} \textcolor{keywordtype}{double} \mbox{\hyperlink{main_8c_adcd199297f9a8146dd65366775e2cf7d}{latest\_temperatur}};}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00042}\mbox{\hyperlink{main_8c_af832cfb864cc3aedc004597d490001f5}{00042}} \textcolor{keywordtype}{float} \mbox{\hyperlink{main_8c_af832cfb864cc3aedc004597d490001f5}{latest\_cpu\_load}};}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00043}00043 }
\DoxyCodeLine{\Hypertarget{main_8c_source_l00044}\mbox{\hyperlink{main_8c_a00c6bb525f28a5f4d4a47a82479b2790}{00044}} \textcolor{keywordtype}{char} \mbox{\hyperlink{main_8c_a00c6bb525f28a5f4d4a47a82479b2790}{received\_UART}}[20];}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00045}\mbox{\hyperlink{main_8c_ad0e60ba05c0f067879e9c46e5bce10d6}{00045}} \textcolor{keywordtype}{int} \mbox{\hyperlink{main_8c_ad0e60ba05c0f067879e9c46e5bce10d6}{UART\_RX\_count}};}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00046}00046 }
\DoxyCodeLine{\Hypertarget{main_8c_source_l00047}00047 }
\DoxyCodeLine{\Hypertarget{main_8c_source_l00048}00048 \textcolor{comment}{/*Prototypen*/}}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00049}00049 }
\DoxyCodeLine{\Hypertarget{main_8c_source_l00050}00050 \textcolor{keywordtype}{void} \mbox{\hyperlink{main_8c_adebdefdb6d4ef0fb996c5495257e938e}{print\_sensor\_values}}(\textcolor{keywordtype}{void});}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00051}00051 }
\DoxyCodeLine{\Hypertarget{main_8c_source_l00052}00052 \textcolor{keywordtype}{double} \mbox{\hyperlink{main_8c_a1b7d65e89a8c4488df180a296015b1b6}{get\_Temperatur}}(\textcolor{keywordtype}{void}); }
\DoxyCodeLine{\Hypertarget{main_8c_source_l00053}00053 \textcolor{keywordtype}{double} \mbox{\hyperlink{main_8c_a93551653b71e7a2a6bcc02a359a35d6a}{get\_Light}}(\textcolor{keywordtype}{void}); }
\DoxyCodeLine{\Hypertarget{main_8c_source_l00054}00054 }
\DoxyCodeLine{\Hypertarget{main_8c_source_l00055}00055 \textcolor{comment}{/*Funktionen*/}}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00056}00056 }
\DoxyCodeLine{\Hypertarget{main_8c_source_l00060}\mbox{\hyperlink{main_8c_adebdefdb6d4ef0fb996c5495257e938e}{00060}} \textcolor{keywordtype}{void} \mbox{\hyperlink{main_8c_adebdefdb6d4ef0fb996c5495257e938e}{print\_sensor\_values}}()}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00061}00061 \{}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00062}00062     \textcolor{keyword}{static} \textcolor{keywordtype}{int} count=0;}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00063}00063 }
\DoxyCodeLine{\Hypertarget{main_8c_source_l00064}00064     \textcolor{comment}{//Temperatur}}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00065}00065     \textcolor{keywordflow}{if} (\mbox{\hyperlink{main_8c_a11becdc58f1b623b42ad75744dfa6461}{status\_temperatur}}==\mbox{\hyperlink{_i2_c_8h_ada1e8e589688e2d6626421d8d85d9c53ab68c130eb6caa378c2c394e9054bbb63}{Finished}})}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00066}00066     \{}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00067}00067        \textcolor{comment}{//Asugabe per UART}}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00068}00068        \textcolor{keywordtype}{char} str[32]; }
\DoxyCodeLine{\Hypertarget{main_8c_source_l00069}00069        sprintf(str,\textcolor{stringliteral}{"{}Temperatur: \%.1f Grad"{}},\mbox{\hyperlink{main_8c_a1b7d65e89a8c4488df180a296015b1b6}{get\_Temperatur}}());}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00070}00070        \mbox{\hyperlink{main__less_8c_a69a22a2e161c1c4207b694f38f5c3f8f}{putsUART}}(str);}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00071}00071        \textcolor{keywordtype}{char} lf[2];}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00072}00072        sprintf(lf, \textcolor{stringliteral}{"{}\(\backslash\)n"{}}); }
\DoxyCodeLine{\Hypertarget{main_8c_source_l00073}00073        \mbox{\hyperlink{main__less_8c_a69a22a2e161c1c4207b694f38f5c3f8f}{putsUART}}(lf);}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00074}00074        }
\DoxyCodeLine{\Hypertarget{main_8c_source_l00075}00075        \mbox{\hyperlink{main_8c_adcd199297f9a8146dd65366775e2cf7d}{latest\_temperatur}}=\mbox{\hyperlink{main_8c_a1b7d65e89a8c4488df180a296015b1b6}{get\_Temperatur}}();}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00076}00076        \mbox{\hyperlink{main_8c_a11becdc58f1b623b42ad75744dfa6461}{status\_temperatur}}=\mbox{\hyperlink{_i2_c_8h_ada1e8e589688e2d6626421d8d85d9c53a1f7a25007001fe77317521028b7af642}{Pending}};}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00077}00077     \}}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00078}00078     }
\DoxyCodeLine{\Hypertarget{main_8c_source_l00079}00079     \textcolor{keywordflow}{if} (\mbox{\hyperlink{main_8c_a9b4d29ba3bf357b320400e1f01a35610}{status\_licht}}==\mbox{\hyperlink{_i2_c_8h_ada1e8e589688e2d6626421d8d85d9c53ab68c130eb6caa378c2c394e9054bbb63}{Finished}})}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00080}00080     \{}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00081}00081        \textcolor{keywordtype}{char} str[16]; }
\DoxyCodeLine{\Hypertarget{main_8c_source_l00082}00082        sprintf(str,\textcolor{stringliteral}{"{}Licht: \%.1f lux"{}},\mbox{\hyperlink{main_8c_a93551653b71e7a2a6bcc02a359a35d6a}{get\_Light}}());}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00083}00083        \mbox{\hyperlink{main__less_8c_a69a22a2e161c1c4207b694f38f5c3f8f}{putsUART}}(str);}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00084}00084        \textcolor{keywordtype}{char} lf[2];}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00085}00085        sprintf(lf, \textcolor{stringliteral}{"{}\(\backslash\)n"{}}); }
\DoxyCodeLine{\Hypertarget{main_8c_source_l00086}00086        \mbox{\hyperlink{main__less_8c_a69a22a2e161c1c4207b694f38f5c3f8f}{putsUART}}(lf);}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00087}00087        \mbox{\hyperlink{main_8c_a9b4d29ba3bf357b320400e1f01a35610}{status\_licht}}=\mbox{\hyperlink{_i2_c_8h_ada1e8e589688e2d6626421d8d85d9c53a1f7a25007001fe77317521028b7af642}{Pending}};}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00088}00088     \}}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00089}00089     \textcolor{keywordflow}{if} (\mbox{\hyperlink{main_8c_a9b4d29ba3bf357b320400e1f01a35610}{status\_licht}}==\mbox{\hyperlink{_i2_c_8h_ada1e8e589688e2d6626421d8d85d9c53a4dfd42ec49d09d8c6555c218301cc30f}{Error}} || \mbox{\hyperlink{main_8c_a11becdc58f1b623b42ad75744dfa6461}{status\_temperatur}}==\mbox{\hyperlink{_i2_c_8h_ada1e8e589688e2d6626421d8d85d9c53a4dfd42ec49d09d8c6555c218301cc30f}{Error}})}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00090}00090     \{}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00091}00091         \textcolor{keywordflow}{if} (count>=1000)}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00092}00092         \{}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00093}00093            count=0;}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00094}00094            \textcolor{keywordtype}{char} str[32]; }
\DoxyCodeLine{\Hypertarget{main_8c_source_l00095}00095            sprintf(str, \textcolor{stringliteral}{"{}Fehler beim Auslesen!"{}});}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00096}00096            \mbox{\hyperlink{main__less_8c_a69a22a2e161c1c4207b694f38f5c3f8f}{putsUART}}(str); }
\DoxyCodeLine{\Hypertarget{main_8c_source_l00097}00097            \textcolor{keywordtype}{char} lf[2];}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00098}00098            sprintf(lf, \textcolor{stringliteral}{"{}\(\backslash\)n"{}}); }
\DoxyCodeLine{\Hypertarget{main_8c_source_l00099}00099            \mbox{\hyperlink{main__less_8c_a69a22a2e161c1c4207b694f38f5c3f8f}{putsUART}}(lf);}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00100}00100         \} }
\DoxyCodeLine{\Hypertarget{main_8c_source_l00101}00101         \textcolor{keywordflow}{else}}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00102}00102         \{}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00103}00103            count++;}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00104}00104         \}}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00105}00105     \}}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00106}00106 }
\DoxyCodeLine{\Hypertarget{main_8c_source_l00107}00107        }
\DoxyCodeLine{\Hypertarget{main_8c_source_l00108}00108    }
\DoxyCodeLine{\Hypertarget{main_8c_source_l00109}00109  }
\DoxyCodeLine{\Hypertarget{main_8c_source_l00110}00110 \} \textcolor{comment}{/* print\_sensor\_values() */}}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00111}00111 }
\DoxyCodeLine{\Hypertarget{main_8c_source_l00112}\mbox{\hyperlink{main_8c_a1b7d65e89a8c4488df180a296015b1b6}{00112}} \textcolor{keywordtype}{double} \mbox{\hyperlink{main_8c_a1b7d65e89a8c4488df180a296015b1b6}{get\_Temperatur}}(\textcolor{keywordtype}{void})}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00113}00113 \{}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00114}00114     \textcolor{keywordtype}{double} temp = \mbox{\hyperlink{main_8c_aef8997c71403e269e83a8e8478ccf73c}{read\_data\_buffer\_temp}}[0]<<8|\mbox{\hyperlink{main_8c_aef8997c71403e269e83a8e8478ccf73c}{read\_data\_buffer\_temp}}[1];}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00115}00115     temp = temp/256;}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00116}00116     \textcolor{keywordflow}{return} temp;}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00117}00117 \}}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00118}00118 }
\DoxyCodeLine{\Hypertarget{main_8c_source_l00119}\mbox{\hyperlink{main_8c_a93551653b71e7a2a6bcc02a359a35d6a}{00119}} \textcolor{keywordtype}{double} \mbox{\hyperlink{main_8c_a93551653b71e7a2a6bcc02a359a35d6a}{get\_Light}}(\textcolor{keywordtype}{void})}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00120}00120 \{}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00121}00121     \textcolor{keywordtype}{double} light = \mbox{\hyperlink{main_8c_a812b49b4aafdf99e12c75ed8005948a1}{read\_data\_buffer\_light}}[0]<<8 | \mbox{\hyperlink{main_8c_a812b49b4aafdf99e12c75ed8005948a1}{read\_data\_buffer\_light}}[1];}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00122}00122     light = light/1.2;}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00123}00123     \textcolor{keywordflow}{return} light;}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00124}00124 \}}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00125}00125 }
\DoxyCodeLine{\Hypertarget{main_8c_source_l00126}\mbox{\hyperlink{main_8c_a6188587bd216339104622b4a766d00b2}{00126}} \textcolor{keywordtype}{void} \mbox{\hyperlink{main_8c_a6188587bd216339104622b4a766d00b2}{measureProcesstime}}()\{}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00127}00127     \textcolor{keyword}{static} uint16\_t time = 0;}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00128}00128     time++;}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00129}00129     \textcolor{keywordflow}{if} (time >= 10000) \textcolor{comment}{//Alle 10s Auslastung berechnen}}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00130}00130     \{}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00131}00131         \textcolor{keywordtype}{float} Auslastung;}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00132}00132         uint16\_t lsw = TMR2;}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00133}00133         uint16\_t msw = TMR3HLD;}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00134}00134 }
\DoxyCodeLine{\Hypertarget{main_8c_source_l00135}00135         \textcolor{keywordtype}{float} Auslastung1 = (float)lsw * 10;}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00136}00136         \textcolor{keywordtype}{float} Auslastung2 = (float)msw *65535*10;}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00137}00137         Auslastung = (Auslastung1 + Auslastung2) / (\mbox{\hyperlink{system_8h_a99d7c812ba23bfdba5d29ec2fddf1e83}{FCY}});}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00138}00138         }
\DoxyCodeLine{\Hypertarget{main_8c_source_l00139}00139         \mbox{\hyperlink{main_8c_af832cfb864cc3aedc004597d490001f5}{latest\_cpu\_load}}=Auslastung;}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00140}00140         }
\DoxyCodeLine{\Hypertarget{main_8c_source_l00141}00141         time = 0;}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00142}00142         TMR3HLD=0;}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00143}00143         TMR3 = 0; \textcolor{comment}{// Clear 32-\/bit Timer (msw)}}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00144}00144         TMR2 = 0;}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00145}00145     \}}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00146}00146  \}}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00147}00147 }
\DoxyCodeLine{\Hypertarget{main_8c_source_l00148}00148 }
\DoxyCodeLine{\Hypertarget{main_8c_source_l00149}\mbox{\hyperlink{main_8c_a394ee1d3ce36d2ac7f571753a6a99a9d}{00149}} \textcolor{keywordtype}{void} \mbox{\hyperlink{main_8c_a394ee1d3ce36d2ac7f571753a6a99a9d}{display\_UART\_RX}}()}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00150}00150 \{}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00151}00151     \textcolor{keywordflow}{if} (\mbox{\hyperlink{main_8c_ad0e60ba05c0f067879e9c46e5bce10d6}{UART\_RX\_count}}>0)}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00152}00152     \{}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00153}00153        \mbox{\hyperlink{lcd__gpio_8c_acfc4f2670ecb8c7c07fb015adb54a526}{lcd\_set\_pos}}(2,1);}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00154}00154        \mbox{\hyperlink{lcd__gpio_8c_a151abba6f7ca2f5cd5060fbaa26697e8}{writeStrLCD}}(\textcolor{stringliteral}{"{}                "{}});}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00155}00155        \mbox{\hyperlink{lcd__gpio_8c_acfc4f2670ecb8c7c07fb015adb54a526}{lcd\_set\_pos}}(2,1);}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00156}00156        \mbox{\hyperlink{lcd__gpio_8c_a151abba6f7ca2f5cd5060fbaa26697e8}{writeStrLCD}}(\mbox{\hyperlink{main_8c_a00c6bb525f28a5f4d4a47a82479b2790}{received\_UART}});}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00157}00157        memset(\mbox{\hyperlink{main_8c_a00c6bb525f28a5f4d4a47a82479b2790}{received\_UART}},0,\textcolor{keyword}{sizeof}(\mbox{\hyperlink{main_8c_a00c6bb525f28a5f4d4a47a82479b2790}{received\_UART}}));}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00158}00158        \mbox{\hyperlink{main_8c_ad0e60ba05c0f067879e9c46e5bce10d6}{UART\_RX\_count}}=0;}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00159}00159     \}}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00160}00160     }
\DoxyCodeLine{\Hypertarget{main_8c_source_l00161}00161 \}}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00162}00162 }
\DoxyCodeLine{\Hypertarget{main_8c_source_l00163}\mbox{\hyperlink{main_8c_a37d537911df5a0124f1a43b0070cd138}{00163}} \textcolor{keywordtype}{void} \mbox{\hyperlink{main_8c_a37d537911df5a0124f1a43b0070cd138}{send\_lcd\_status}}()}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00164}00164 \{}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00165}00165        \textcolor{keywordtype}{char} str[32]; }
\DoxyCodeLine{\Hypertarget{main_8c_source_l00166}00166        sprintf(str,\textcolor{stringliteral}{"{}Status: \%02X"{}},\mbox{\hyperlink{lcd__gpio_8c_a6bcfd73d519832504e3b8bc7b3f6f408}{lcd\_get\_status}}());}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00167}00167        \mbox{\hyperlink{main__less_8c_a69a22a2e161c1c4207b694f38f5c3f8f}{putsUART}}(str);}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00168}00168        \textcolor{keywordtype}{char} lf[2];}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00169}00169        sprintf(lf, \textcolor{stringliteral}{"{}\(\backslash\)n"{}}); }
\DoxyCodeLine{\Hypertarget{main_8c_source_l00170}00170        \mbox{\hyperlink{main__less_8c_a69a22a2e161c1c4207b694f38f5c3f8f}{putsUART}}(lf);}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00171}00171 \}}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00172}00172 }
\DoxyCodeLine{\Hypertarget{main_8c_source_l00173}\mbox{\hyperlink{main_8c_add65c2bbc4a328fc893abeded917bc66}{00173}} \textcolor{keywordtype}{void} \mbox{\hyperlink{main_8c_add65c2bbc4a328fc893abeded917bc66}{display\_temp\_load}}()}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00174}00174 \{}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00175}00175    \textcolor{keyword}{static} uint16\_t time = 0;}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00176}00176    \textcolor{keyword}{static} \textcolor{keywordtype}{bool} switch\_value=1;}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00177}00177    time++;}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00178}00178    }
\DoxyCodeLine{\Hypertarget{main_8c_source_l00179}00179    \textcolor{keywordflow}{if} (time >= 3000) \textcolor{comment}{//Alle 3s Refresh}}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00180}00180    \{}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00181}00181        time=0;}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00182}00182 }
\DoxyCodeLine{\Hypertarget{main_8c_source_l00183}00183        \textcolor{keywordflow}{if} (switch\_value) \textcolor{comment}{//Temperatur}}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00184}00184        \{}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00185}00185             \textcolor{keywordtype}{char} str[32]; }
\DoxyCodeLine{\Hypertarget{main_8c_source_l00186}00186             sprintf(str,\textcolor{stringliteral}{"{}Temperatur: \%.1f"{}},\mbox{\hyperlink{main_8c_adcd199297f9a8146dd65366775e2cf7d}{latest\_temperatur}});}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00187}00187             \mbox{\hyperlink{lcd__gpio_8c_acfc4f2670ecb8c7c07fb015adb54a526}{lcd\_set\_pos}}(1,1);}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00188}00188             \mbox{\hyperlink{lcd__gpio_8c_a151abba6f7ca2f5cd5060fbaa26697e8}{writeStrLCD}}(str);}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00189}00189             switch\_value=0;}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00190}00190        \}}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00191}00191        }
\DoxyCodeLine{\Hypertarget{main_8c_source_l00192}00192        \textcolor{keywordflow}{else} \textcolor{comment}{//Auslastung}}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00193}00193        \{}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00194}00194            \textcolor{keywordtype}{char} str[32]; }
\DoxyCodeLine{\Hypertarget{main_8c_source_l00195}00195            sprintf(str,\textcolor{stringliteral}{"{}Auslastung: \%.2f"{}},(\textcolor{keywordtype}{double})\mbox{\hyperlink{main_8c_af832cfb864cc3aedc004597d490001f5}{latest\_cpu\_load}});}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00196}00196            \mbox{\hyperlink{lcd__gpio_8c_acfc4f2670ecb8c7c07fb015adb54a526}{lcd\_set\_pos}}(1,1);}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00197}00197            \mbox{\hyperlink{lcd__gpio_8c_a151abba6f7ca2f5cd5060fbaa26697e8}{writeStrLCD}}(str);}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00198}00198            switch\_value=1;}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00199}00199        \}}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00200}00200        }
\DoxyCodeLine{\Hypertarget{main_8c_source_l00201}00201        \mbox{\hyperlink{main_8c_a394ee1d3ce36d2ac7f571753a6a99a9d}{display\_UART\_RX}}();}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00202}00202    \}}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00203}00203    }
\DoxyCodeLine{\Hypertarget{main_8c_source_l00204}00204    }
\DoxyCodeLine{\Hypertarget{main_8c_source_l00205}00205 }
\DoxyCodeLine{\Hypertarget{main_8c_source_l00206}00206 \}}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00207}00207 }
\DoxyCodeLine{\Hypertarget{main_8c_source_l00208}00208 }
\DoxyCodeLine{\Hypertarget{main_8c_source_l00209}00209 }
\DoxyCodeLine{\Hypertarget{main_8c_source_l00210}00210 }
\DoxyCodeLine{\Hypertarget{main_8c_source_l00211}00211 }
\DoxyCodeLine{\Hypertarget{main_8c_source_l00212}00212 }
\DoxyCodeLine{\Hypertarget{main_8c_source_l00213}00213 \textcolor{comment}{/* Main Program                                                               */}}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00214}00214 }
\DoxyCodeLine{\Hypertarget{main_8c_source_l00216}\mbox{\hyperlink{main_8c_aec570f4ab450e8224be63b7dcfa62b35}{00216}} int16\_t \mbox{\hyperlink{main_8c_aec570f4ab450e8224be63b7dcfa62b35}{main}}(\textcolor{keywordtype}{void})}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00217}00217 \{}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00218}00218     }
\DoxyCodeLine{\Hypertarget{main_8c_source_l00219}00219     uint16\_t Count = 0;}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00220}00220 }
\DoxyCodeLine{\Hypertarget{main_8c_source_l00221}00221     \mbox{\hyperlink{system_8c_a9cf05fad20cabd4ca4a12ab9b1c6e7ea}{ConfigureOscillator}}();}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00222}00222     \mbox{\hyperlink{main__less_8c_a2cb50cd9b95f3b32212def6b17da3931}{initUART}}();}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00223}00223     \mbox{\hyperlink{main__less_8c_af460918a62cf83ab0848c41f0ae852ea}{init\_timer1}}(); \textcolor{comment}{//Jede Sekunde I2C Anfrage}}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00224}00224     \mbox{\hyperlink{main__less_8c_ab99293b6cbbc43735cbe80ab55287b29}{init\_ms\_t4}}(); \textcolor{comment}{//Heartbeat in Superloop}}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00225}00225     \mbox{\hyperlink{system_8c_a85f94a0dfff81bccb50e5cf5528c46c7}{init\_t2\_t3}}();}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00226}00226     \mbox{\hyperlink{_i2_c_8c_abe298a3c1d98035cebe8b0535db549fa}{initI2C}}();}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00227}00227     \mbox{\hyperlink{lcd__gpio_8c_ac23e73124dc9fabae95671fe71d074a6}{lcd\_init}}();}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00228}00228 }
\DoxyCodeLine{\Hypertarget{main_8c_source_l00229}00229     \mbox{\hyperlink{lcd__gpio_8c_a151abba6f7ca2f5cd5060fbaa26697e8}{writeStrLCD}}(\textcolor{stringliteral}{"{}Hello World"{}});}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00230}00230     \mbox{\hyperlink{main__less_8c_a9d9be562445321043224885018bc7da3}{delay\_ms}}(2000);}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00231}00231     \mbox{\hyperlink{lcd__gpio_8c_ad235a86241458b1e7b8771688bfdaf9a}{lcd\_clear}}();}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00232}00232 }
\DoxyCodeLine{\Hypertarget{main_8c_source_l00233}00233     \_RP66R = \_RPOUT\_U1TX; \textcolor{comment}{//UART Pin Mapping}}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00234}00234     RPINR18bits.U1RXR = 0b1011000;}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00235}00235 }
\DoxyCodeLine{\Hypertarget{main_8c_source_l00236}00236     }
\DoxyCodeLine{\Hypertarget{main_8c_source_l00237}00237     \_TRISF0 = 0; \textcolor{comment}{//FÃ¼r Asuslastungsberechnung}}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00238}00238     \_T2CKR = 96;\textcolor{comment}{//LATF0 auf Gated Timer Input mappen}}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00239}00239 }
\DoxyCodeLine{\Hypertarget{main_8c_source_l00240}00240     \_TRISE8 = 1; \textcolor{comment}{//Uart RX als Input}}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00241}00241     \_ANSE8 = 0;}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00242}00242 }
\DoxyCodeLine{\Hypertarget{main_8c_source_l00243}00243     }
\DoxyCodeLine{\Hypertarget{main_8c_source_l00244}00244     \textcolor{keywordflow}{while}(1)}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00245}00245     \{}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00246}00246         \_LATF0 = 0; \textcolor{comment}{//Gated Timer stoppen}}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00247}00247         \textcolor{keywordflow}{if}(\_T4IF)}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00248}00248         \{}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00249}00249             \_T4IF=0;}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00250}00250             Count++;}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00251}00251             \textcolor{keywordflow}{if} (Count >= \mbox{\hyperlink{main_8c_a8095cd8bb3de52fffba928ed8ff15065}{HEARTBEAT\_MS}})}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00252}00252             \{}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00253}00253                 \_LATF0 = 1; \textcolor{comment}{//Gated Timer starten}}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00254}00254                 Count = 0;}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00255}00255                 \mbox{\hyperlink{_i2_c_8c_a7335126c4448cdb02cd6fa5973398fbf}{doI2C}}();}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00256}00256                 \mbox{\hyperlink{main_8c_adebdefdb6d4ef0fb996c5495257e938e}{print\_sensor\_values}}();}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00257}00257                 \mbox{\hyperlink{main_8c_a6188587bd216339104622b4a766d00b2}{measureProcesstime}}();}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00258}00258                 \mbox{\hyperlink{main_8c_add65c2bbc4a328fc893abeded917bc66}{display\_temp\_load}}(); }
\DoxyCodeLine{\Hypertarget{main_8c_source_l00259}00259             \}         }
\DoxyCodeLine{\Hypertarget{main_8c_source_l00260}00260         \}}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00261}00261     \}}
\DoxyCodeLine{\Hypertarget{main_8c_source_l00262}00262 \}}

\end{DoxyCode}
